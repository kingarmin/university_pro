Skip to content
Navigation Menu
kingarmin
university_pro

Type / to search
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
2
Insights
Settings
university_pro
/
README.md
in
master

Edit

Preview
Indent mode

Spaces
Indent size

2
Line wrap mode

No wrap
Editing README.md file contents
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
# پروژه چت بات هوش مصنوعی تلگرام 


##  هدف پروژه: 
۱- ساخرت یک ربات تلگرامی جهت راحت تر کردن استفاده از ابزار چت بات هوش مصنوعی .
۲- آشنا کردن افراد با ابزار های هوش مصنوعی . 
۳- راخت کردن استفاده از چت بات Gimini .

## کد پروژه :

[لینک کد پروژه](https://github.com/kingarmin/university_pro.git)

## توضیح خط به خط پروژه : 

*سه خط اول* پروژه کتابخانه ها و ماژول های مورد نیاز استفاده از telegram bot api را وارد کردم . 

*در خط چهارم* کتابخانه request به صورت خلاصه req را وارد کردم تا در پروسه دریافت عکس از آن استفاده کنم .

*در خط پنجم* از کتابخانه google شی geni رو وارد کردم تا از api مدل هوشمند gemini راحت تر استفاده کنم .

*در خط پنجم و شیشم* هم کتابخانه های مورد نیاز وارد کردن و دریافت عکس رو وارد کردم . 

*خط هفتم تا نهم * تنظیمات گوگل gemini صورت گرفته : 

1.  **یک کلاینت Google Gemini ایجاد می‌شود** که با کلید API تأیید می‌شود.

2.  **یک چت در مدل Gemini باز می‌شود** که پیام‌های متنی را پردازش می‌کند.

3.  **متغیر `img`** در ابتدا مقدار `None` دارد و بعداً برای ذخیره تصویر استفاده می‌شود.

*خط دهم* تنظیمات لاگ ها :

این بخش باعث می‌شود که تمام رویدادها (مثل خطاها و پیام‌های اجرا) در لاگ ذخیره شوند.

*خط یازدهم* تعریف توکن ربات تلگرام . 

*خط ۱۵ تا ۱۶ * :

وقتی کاربر دستور `/start` را ارسال کند، **ربات یک پیام "Hello" ارسال می‌کند**.

*خط ۱۸ تا ۳۱ * تعریف تابع ai_res:

1.  وقتی **کاربر یک متن ارسال کند**، این تابع اجرا می‌شود.

2.  **متغیر `text` مقدار پیام کاربر را ذخیره می‌کند**.

3. **اگر تصویری ارسال نشده باشد** (`img==None`) →



+ متن کاربر برای مدل **Gemini** ارسال می‌شود.

+ پاسخ مدل دریافت و به کاربر فرستاده می‌شود.

**اگر قبلاً تصویری ارسال شده باشد (`img!=None`)**:

+ تصویر **تبدیل به شیء `Image`** از طریق `PIL` می‌شود.

+ **همراه با متن کاربر، به مدل Gemini ارسال می‌شود.**

+ بعد از پردازش، `img=None` می‌شود تا تصویر برای پیام‌های بعدی پاک شود.

*خط ۳۳ تا ۳۹ * تعریف تابع گرفتن عکس : 

**وقتی کاربر یک عکس ارسال کند**، این تابع اجرا می‌شود:

+ **آخرین (بزرگترین) نسخه تصویر دریافت می‌شود** (`update.message.photo[-1]`).

+ **لینک تصویر از سرور تلگرام دریافت می‌شود** (`file_path`).

+ **تصویر دانلود شده و به `img` اختصاص داده می‌شود**.

+ **پیام "Image set" ارسال می‌شود** تا کاربر بفهمد که تصویر ذخیره شده است.

*خط ۴۱ تا ۴۲ * راه اندازی ربات  :

یک **اپلیکیشن تلگرام ساخته می‌شود** و از `tok` برای احراز هویت استفاده می‌کند.

*خط ۴۳ تا ۴۸ * راه اندازی هندلر ها : 

1.  **`start_handler`** → مدیریت دستور `/start`

2.  **`text_handler`** → پردازش **متن‌های ارسالی کاربر**

3.  **`img_handler`** → پردازش **تصاویر ارسالی کاربر**

4.  تمام این هندلرها به **ربات اضافه می‌شوند**.

*خط پایانی*:

**ربات شروع به گوش دادن برای پیام‌های دریافتی می‌کند** و در صورت دریافت پیام، آن را پردازش می‌کند.

پس از اجرای کد با فیلتر شکن . ربات آماده فعالیت می شود .

Use Control + Shift + m to toggle the tab key moving focus. Alternatively, use esc then tab to move to the next interactive element on the page.
No file chosen
Attach files by dragging & dropping, selecting or pasting them.
New File at / · kingarmin/university_pro
